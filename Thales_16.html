<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Thales</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Thales</h1><br/><p>1st of Dec 2022</p><p>Thales</p><p><a href="https://www.vulnhub.com/entry/thales-1,749/">https://www.vulnhub.com/entry/thales-1,749/</a></p><p>sudo netdiscover -P -i eth0 -r 10.0.0.0/24</p><p>IP address 10.0.0.165 </p><p>nmap discovered port 22 and 8080 open</p><p>nmap -p 22,8080 -sC -SV &lt;ip address&gt;</p><p></p><p>open the website on 10.0.0.168:8080</p><p></p><p>went googling and found this</p><p><a href="https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat">https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/tomcat</a></p><p>from the link above we get info on manager directory</p><p>go in and you see  a login panel</p><p>create a seesion on metasploit to get the password for tomcat</p><p><img src="images/16-1.png" alt="images/16-1.png" /></p><p>so now we have the tomcat and role1 as credentials, use that to access 10.0.0.165:8080/manager</p><p><img src="images/16-2.png" alt="images/16-2.png" /></p><p> we create a reverse shell on WAR </p><p> from revshells.com go to msfvenom scroll down to WAR</p><p> update to Kali IP address and pick up a port</p><p> copy and paste that into Kali to create a .war file</p><p> <img src="images/16-3.png" alt="images/16-3.png" /> </p><p>upload that and deploy </p><p>start a listener on the specified port </p><p><img src="images/16-4.png" alt="images/16-4.png" /></p><p>click /revshell and you will gain a reverse shell</p><p></p><p><img src="images/16-5.png" alt="images/16-5.png" /></p><p>grab a better shell, cat /etc/passwd and we discover user Thales as well</p><p> </p><p> get an unbreakable shell using the commands below from my common linux commands for pentesting.txt</p><p> <img src="images/16-6.png" alt="images/16-6.png" /></p><p> <img src="images/16-7.png" alt="images/16-7.png" /> </p><p> <img src="images/16-8.png" alt="images/16-8.png" /></p><p> we couldnt use the get command so we try to copy and paste </p><p> </p><p> we try to cd to .ssh sinec we have permission</p><p> <img src="images/16-9.png" alt="images/16-9.png" /></p><p>so cat id_rsa, nano thalehash.txt</p><p>ssh2john thalehash.txt &gt; hash</p><p>to change it to a hash</p><p>using john and rockyou.txt wordlist try to crack the hash</p><p><img src="images/16-10.png" alt="images/16-10.png" /></p><p>now have credentials for thales</p><p>su to thales</p><p><img src="images/16-11.png" alt="images/16-11.png" /> </p><p></p><p><img src="images/16-12.png" alt="images/16-12.png" /> </p><p>cat the backup.sh </p><p><img src="images/16-13.png" alt="images/16-13.png" /></p><p>nano backup.sh </p><p>add this payload with my Kali IP address and  new listerner port</p><p><img src="images/16-14.png" alt="images/16-14.png" /></p><p>start a listener and wait for it to exceute</p><p><img src="images/16-15.png" alt="images/16-15.png" /></p></div>
</body>
</html>
